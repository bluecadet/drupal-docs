<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../assets/style.css?t=615badd5">
    <link rel="stylesheet" href="../main.css?t=734caa58">
    <script src="../assets/script.js?t=36f3d457"></script>
    <script src="../scripts.js?t=56b80ffb"></script>
    <title>Installation - Drupal Docs</title>
    <meta name="viewport" content="width=device-width">
  </head>
  <body class="-menu-visible">
    <div class="doc-layout">
      <div class="toggle menu-toggle js-menu-toggle"></div>
      <div class="menu toc-menu">
        <li class="menu-item -level-0 -parent">
          <ul class="submenu">
            <li class="menu-item -level-1"><a class="link title  link-index" href="../index.html">Drupal Docs</a>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title  link-d7" href="../d7/index.html">D7</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title  link-d7install" href="../d7/install.html">Installation</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title  link-d8" href="../d8/index.html">D8</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title -active link-d8install" href="../d8/install.html">Installation</a>
                  <ul class="headings heading-list">
                    <li class="heading-item -depth-2"><a class="hlink link-on-pantheon" href="#on-pantheon">On Pantheon</a>
                      <ul class="heading-list -depth-2">
                        <li class="heading-item -depth-3"><a class="hlink link-traditional-()" href="#traditional-()">Traditional (?)</a>
                        </li>
                        <li class="heading-item -depth-3"><a class="hlink link-composer-workflowcontinuous-integration." href="#composer-workflowcontinuous-integration.">Composer Workflow/Continuous integration.</a>
                        </li>
                      </ul>
                    </li>
                    <li class="heading-item -depth-2"><a class="hlink link-setting-up-local-environment" href="#setting-up-local-environment">Setting Up local environment</a>
                      <ul class="heading-list -depth-2">
                        <li class="heading-item -depth-3"><a class="hlink link-traditional" href="#traditional">Traditional</a>
                        </li>
                        <li class="heading-item -depth-3"><a class="hlink link-with-lando" href="#with-lando">With Lando</a>
                        </li>
                      </ul>
                    </li>
                    <li class="heading-item -depth-2"><a class="hlink link-pantheon-circleci-and-lando" href="#pantheon-circleci-and-lando">Pantheon, CircleCI, and Lando</a>
                      <ul class="heading-list -depth-2">
                        <li class="heading-item -depth-3"><a class="hlink link-prerequisites" href="#prerequisites">Prerequisites</a>
                        </li>
                        <li class="heading-item -depth-3"><a class="hlink link-recipe" href="#recipe">Recipe</a>
                        </li>
                      </ul>
                    </li>
                    <li class="heading-item -depth-2"><a class="hlink link-starter-modules" href="#starter-modules">Starter modules</a>
                      <ul class="heading-list -depth-2">
                        <li class="heading-item -depth-3"><a class="hlink link-all-sites" href="#all-sites">All Sites</a>
                        </li>
                        <li class="heading-item -depth-3"><a class="hlink link-web-only" href="#web-only">Web only</a>
                        </li>
                        <li class="heading-item -depth-3"><a class="hlink link-some-other-useful-ones" href="#some-other-useful-ones">Some other useful ones</a>
                        </li>
                        <li class="heading-item -depth-3"><a class="hlink link-turn-on-a-few-we-normally-use" href="#turn-on-a-few-we-normally-use">Turn on a few we normally use</a>
                        </li>
                        <li class="heading-item -depth-3"><a class="hlink link-turn-off-a-few-modules-we-don't-normally-use" href="#turn-off-a-few-modules-we-don't-normally-use">Turn off a few modules we donâ€™t normally use</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-d8setup" href="../d8/setup.html">Setup</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-d8pre-project" href="../d8/pre-project.html">Pre-Project Planning</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-d8pre-launch" href="../d8/pre-launch.html">Pre-Launch Planning</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-d8custom-modules" href="../d8/custom-modules.html">Custom Modules/Themes</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-d8custom-module-examples" href="../d8/custom-module-examples.html">Custom Module/Theme Examples</a>
                </li>
                <li class="menu-item -level-2 -parent"><span class="title">Recipes</span>
                  <ul class="submenu">
                    <li class="menu-item -level-3"><a class="link title  link-d8media" href="../d8/media.html">Media Entity Setup</a>
                    </li>
                    <li class="menu-item -level-3"><span class="title">[NEED PAGE] WYSIWYG Setup</span>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-d8recipesckeditor" href="../d8/recipes/ckeditor.html">CKEditor Plugins</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-d8recipesparagraphs" href="../d8/recipes/paragraphs.html">Paragraphs</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-d8recipesstates" href="../d8/recipes/states.html">#States</a>
                    </li>
                  </ul>
                </li>
                <li class="menu-item -level-2 -parent"><a class="link title  link-d8notes" href="../d8/notes.html">Notes:</a>
                  <ul class="submenu">
                    <li class="menu-item -level-3"><a class="link title  link-d8notesthf_install_notes" href="../d8/notes/thf_install_notes.html">THF install Notes</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-d8notesnhmla_install_notes" href="../d8/notes/nhmla_install_notes.html">NHMLA install Notes</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title  link-pantheon" href="../pantheon/index.html">Pantheon</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title  link-pantheonquicksilver" href="../pantheon/quicksilver.html">Quicksilver</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1"><span class="title">Composer workflow</span>
            </li>
            <li class="menu-item -level-1"><a class="link title  link-pms" href="../pms.html">What PM's Need to know</a>
            </li>
            <li class="menu-item -level-1 -parent"><span class="title">Custom Modules/Repos</span>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title  link-create-custom-repos" href="../create-custom-repos.html">How to Create Custom Managed Modules</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-use-custom-repos" href="../use-custom-repos.html">How to Use Custom Managed Modules</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-manage-custom-repos" href="../manage-custom-repos.html">How to Manage Custom Modules</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1"><span class="title">[NEED PAGE] Drupal vs Wordpress</span>
            </li>
            <li class="menu-item -level-1"><span class="title">[NEED PAGE] For Clients</span>
            </li>
            <li class="menu-item -level-1"><span class="title">Other stuff we want to talk about...</span>
            </li>
          </ul>
        </li>
      </div>
      <div class="body page-d8install">
        <div class="header-nav">
          <div class="right"><a class="iconlink" href="https://github.com/bluecadet/drupal-docs" data-title="bluecadet/drupal-docs">
              <!-- span.title Open in GitHub--><span class="icon -github"></span></a>
          </div>
        </div>
        <div class="markdown-body"><h1 id="how-to:-d8-installation">HOW TO: D8 Installation</h1>
<h2 id="on-pantheon">On Pantheon</h2>
<h3 id="traditional-()">Traditional (?)</h3>
<h3 id="composer-workflowcontinuous-integration.">Composer Workflow/Continuous integration.</h3>
<p>This method allows for a full composer workflow, and the ability to add continuos integration tools to your project workflow.</p>
<p>Details pulled from: <a href="https://pantheon.io/docs/guides/build-tools/">https://pantheon.io/docs/guides/build-tools/</a></p>
<p><a href="https://github.com/pantheon-systems/terminus-build-tools-plugin">https://github.com/pantheon-systems/terminus-build-tools-plugin</a></p>
<p>Follow directions at pantheon&apos;s link above.</p>
<h4 id="things-to-note:">Things to note:</h4>
<ul>
<li>Create a Github personal access token</li>
<li>Create CircleCI personal API token</li>
<li>Run terminus command:
<br><code>terminus build:project:create --team=&quot;Bluecadet&quot; --org=&quot;bluecadet&quot; --email=&quot;pinge@bluecadet.com&quot; --admin-email=&quot;pinge@bluecadet.com&quot; d8 philly-pwa</code>
make sure to include team and org, otherwise projects will be saved to your personal accounts.</li>
<li>Once the environemnts are created, goto <a href="http://circleci.com">circleci.com</a>, under the project settings, goto Advanced Settings -&gt; Only build pull requests and check ON. This will reduce uneeded builds and save time during development.</li>
<li>When creating a local environment, if you are using apache, there will not be an <code>.htaccess</code> file at the root of the project. You will need to grab it from another repo OR from a clean download of Drupal from <a href="http://drupal.org">drupal.org</a>.</li>
</ul>
<!-- 1. The site is now ready to be worked on
1. Add team members to Pantheon account
1. Add team members to github repo
1. [Optionally: Setup TEST and LIVE environments on pantheon. Sometimes we wait to do this until a later stage]
1. Setup backups for the site. If this is a sandbox (unpaid) site, you will need to do this through a terminus command [LINK] -->
<hr>
<h2 id="setting-up-local-environment">Setting Up local environment</h2>
<h3 id="traditional">Traditional</h3>
<ol>
<li>Clone repo <code>git clone git@github.com:bluecadet/mann-web.git [DIR]</code>
obviously change out dir and path...</li>
<li>Run <code>composer install</code></li>
<li>Setup DB</li>
<li>Create DB export in Pantheon</li>
<li>Create local DB</li>
<li>Import DB from Pantheon</li>
<li>Setup any local permissions for MySQL if you have any</li>
<li>Find Hash Salt from Pantheon
Run <code>terminus drush &lt;site&gt;.&lt;env&gt; -- ev &apos;return getenv(&quot;DRUPAL_HASH_SALT&quot;)&apos;</code></li>
<li>Copy <code>/web/sites/example.settings.local.php</code> to <code>/web/sites/default/settings.local.php</code></li>
<li>Add DB info around line 17</li>
</ol>
<pre><code>$databases[&apos;default&apos;][&apos;default&apos;] = array (
  &apos;database&apos; =&gt; &apos;[DB-name]&apos;,
  &apos;username&apos; =&gt; &apos;[DB-username]&apos;,
  &apos;password&apos; =&gt; &apos;[DB-userpassword]&apos;,
  &apos;prefix&apos; =&gt; &apos;&apos;,
  &apos;host&apos; =&gt; &apos;localhost&apos;,
  &apos;port&apos; =&gt; &apos;3306&apos;,
  &apos;namespace&apos; =&gt; &apos;Drupal\\Core\\Database\\Driver\\mysql&apos;,
  &apos;driver&apos; =&gt; &apos;mysql&apos;,
);
</code></pre>
<ol>
<li>Add hash_salt from above to end of file. Should look something like:</li>
</ol>
<pre><code>$settings[&apos;hash_salt&apos;] = &apos;X/ZoCz4bINpIQq1xufoInrULRDtN0UABMUW7m09HcCY=&apos;;
</code></pre>
<ol>
<li>Setup local settings for domain name or however you have it setup</li>
<li>Add trusted local host patterns for your local development</li>
</ol>
<pre><code>$settings[&apos;trusted_host_patterns&apos;][] = &apos;^.+.localhost.com$&apos;;
$settings[&apos;trusted_host_patterns&apos;][] = &apos;^localhost.com$&apos;;
</code></pre>
<ol>
<li>Try it out!</li>
</ol>
<h3 id="with-lando">With Lando</h3>
<p>If you do not already have lando installed, visit <a href="https://docs.devwithlando.io/installation/installing.html">https://docs.devwithlando.io/installation/installing.html</a></p>
<ol>
<li>Clone repo <code>git clone git@github.com:bluecadet/[INSERT-REPO-NAME].git [DIR]</code></li>
<li>In terminal, <code>cd</code> into the project directory and run <code>lando init</code></li>
<li>Select <code>Pantheon</code> as the recipie, and select your Pantheon account. Select the site from the list.</li>
<li>You may need to add a machine token if you are not logged in. Add the token with <code>lando terminus auth:login --machine-token=[YOUR_MACHINE_TOKEN]</code>.
<ol>
<li>Info to create tokens can be found <a href="https://pantheon.io/docs/machine-tokens/">here</a></li>
</ol>
</li>
<li>Run <code>lando start</code></li>
<li>Run <code>lando pull</code>.</li>
<li>You can pull code from the <code>dev</code> enviornment to make sure you are up to date (or none).</li>
<li>Pull the database from <code>dev</code></li>
<li>Optionally pull files from <code>dev</code> (or select none)</li>
</ol>
<h4 id="get-a-local-url">Get a local url</h4>
<p>Run <code>lando info</code>. In the resulting json, your local urls can be found at:</p>
<pre><code>{
  ...
  &quot;edge&quot;:
    ...
    &quot;urls&quot;:
      &quot;http://localhost:32801&quot;,
      &quot;http://yoursitename.lndo.site&quot;,
      &quot;https://yoursitename.lndo.site&quot;
}
</code></pre>
<p>Visit one of these urls and make sure everything is working as expected.</p>
<h4 id="notes:">Notes:</h4>
<p>When using Lando, all <code>terminus</code> commands should be prepended with <code>lando</code>, i.e:</p>
<pre><code>lando terminus drush cim
</code></pre>
<p>Lando and Apache often compete for localhost port 80, so it might make sense to stop Apache before running Lando, i.e.:</p>
<pre><code>sudo apachectl stop
</code></pre>
<h2 id="pantheon-circleci-and-lando">Pantheon, CircleCI, and Lando</h2>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li><a href="https://getcomposer.org">composer</a></li>
<li><a href="https://docs.devwithlando.io">lando</a></li>
<li><a href="https://github.com/pantheon-systems/terminus">terminus</a> with <a href="https://pantheon.io/docs/machine-tokens/">machine token</a></li>
</ul>
<h3 id="recipe">Recipe</h3>
<ul>
<li>Pull repo from github <code>git clone [repo]</code></li>
<li>In your terminal, go to your repo directory and run <code>composer install</code></li>
<li>Check if the repo includes: <strong>.lando.yml</strong> and <strong>pantheon.yml</strong>. If not, in your terminal, run <code>lando init --recipe=pantheon</code> to bind to a Pantheon instance</li>
<li>Open up the repo in your text editor. Modify <strong>.lando.yml</strong> to enable debugging: Add line with <code>xdebug: true</code></li>
<li>In your text editor, check that <strong>pantheon.yml</strong> has a nested webroot specified: <code>web_docroot: true</code></li>
<li>In your text editor, check that <strong>pantheon.yml</strong> has PHP version set to 7.0 (default 7.2 produces errors as of lando * version v3.0.0-beta.47): <code>php_version: 7.0</code></li>
<li>In your terminal, run <code>lando start</code></li>
<li>In your terminal, do a pull for the database and files: <code>lando pull --code=none --database=dev --files=dev</code></li>
</ul>
<h2 id="starter-modules">Starter modules</h2>
<h3 id="all-sites">All Sites</h3>
<ul>
<li>admin_toolbar</li>
<li>config_devel</li>
<li>config_split</li>
<li>ctools</li>
<li>devel</li>
<li>diff</li>
<li>focal_point</li>
<li>hsts</li>
<li>inline_entity_form</li>
<li>new_relic_rpm</li>
<li>pantheon_advanced_page_cache</li>
<li>paragraphs</li>
<li>redis</li>
</ul>
<pre><code>lando composer require drupal/admin_toolbar drupal/config_devel drupal/config_split drupal/ctools drupal/devel drupal/diff drupal/focal_point drupal/hsts  drupal/inline_entity_form drupal/new_relic_rpm drupal/pantheon_advanced_page_cache drupal/paragraphs drupal/redis

cd web

lando drush en admin_toolbar admin_toolbar_tools config_devel config_split ctools devel kint diff focal_point hsts inline_entity_form new_relic_rpm pantheon_advanced_page_cache paragraphs

</code></pre>
<p>NOTE: turn on Redis LATER!!</p>
<h3 id="web-only">Web only</h3>
<ul>
<li>metatag</li>
<li>pathauto</li>
<li>redirect</li>
<li>simple_sitemap</li>
<li>token</li>
<li>viewsreference</li>
</ul>
<pre><code>lando composer require drupal/metatag drupal/pathauto drupal/redirect drupal/token drupal/viewsreference

cd web

lando drush en metatag pathauto redirect token viewsreference

</code></pre>
<h3 id="some-other-useful-ones">Some other useful ones</h3>
<ul>
<li>ultimate_cron</li>
<li>views_bulk_operations</li>
<li>config_split</li>
<li>devel_generate (submodule of devel)</li>
</ul>
<h3 id="turn-on-a-few-we-normally-use">Turn on a few we normally use</h3>
<ul>
<li>block_content</li>
<li>media</li>
</ul>
<pre><code>lando drush en block_content media
</code></pre>
<h3 id="turn-off-a-few-modules-we-don&apos;t-normally-use">Turn off a few modules we don&#x2019;t normally use</h3>
<ul>
<li>big_pipe</li>
<li>color</li>
<li>comment</li>
<li>help</li>
<li>history</li>
<li>quickedit</li>
<li>rdf</li>
<li>responsive_image</li>
<li>tour</li>
</ul>
<pre><code>lando drush pmu big_pipe color comment help history quickedit rdf responsive_image tour

</code></pre>
<p>Note: delete comment field on Article before trying to run above command</p>

        </div>
        <div class="footer-nav">
          <div class="left"><a href="../d8/index.html"><span class="title">D8</span></a></div>
          <div class="right"><a href="../d8/setup.html"><span class="label">Next: </span><span class="title">Setup</span></a></div>
        </div>
      </div>
    </div>
  </body>
</html>